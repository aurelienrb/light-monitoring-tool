<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Light Monitor</title>
	<link rel="shortcut icon" href="" />
	<link href="css/style.css" rel="stylesheet" type="text/css">
	<!--[if lte IE 8]><script language="javascript" type="text/javascript" src="../../excanvas.min.js"></script><![endif]-->
	<script language="javascript" type="text/javascript" src="js/jquery.js"></script>
	<script language="javascript" type="text/javascript" src="js/jquery.flot.js"></script>
	<script type="text/javascript">
	$(function() {
		var options = {
			lines: { show: true },
			points: { show: false },
			yaxis: {
				min: 0,
				max: 100
			},
			xaxis: {
				tickDecimals: 0,
				tickSize: 30
			},
			grid: {
				backgroundColor: { colors: [ "#fff", "#eee" ] },
				borderWidth: {
					top: 1,
					right: 1,
					bottom: 2,
					left: 2
				}
			}
		};
		
		$.plot("#placeholder", [], options);
		
		function request_data() {
			$.ajax({
				url: "/api/cpu",
				type: "GET",
				dataType: "json",
				success: function(series) {
					$('#status-info').html('');
					$.plot("#placeholder", [series], options);
					setTimeout(request_data, 1000);
				},
				error: function(xhr, status) {
					console.log(status);
					$('#status-info').html('Error, retrying...');
					setTimeout(request_data, 1000);
				}
			});
		}

		$('#status-info').html('Fetching data...');
		request_data();
	});
	</script>
</head>
<body>
	<div id="header">
		<h2>CPU activity</h2>
	</div>

	<div id="content">
		<h3>Last 300 seconds</h3>
		<div class="demo-container">
			<div id="placeholder" class="demo-placeholder"></div>
		</div>
		<p id="status-info" />
	</div>
	<!--div id="footer">
		Copyright &copy; 2016
	</div-->
</body>
</html>